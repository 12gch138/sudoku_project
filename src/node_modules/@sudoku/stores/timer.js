import { writable } from 'svelte/store';

export const timerRunning = writable(false);

function createTimer() {
	let timerInterval;

	const timer = writable(0);

	// The timer uses a writable store but only returns a subscribe function so it's read-only
	return {
		subscribe: timer.subscribe,

		start: () => {
			timerInterval = setInterval(() => {
				timer.update(t => t + 1);
			}, 1000);
			timerRunning.set(true);
		},

		pause: () => {
			clearInterval(timerInterval);
			timerRunning.set(false);
		},

		reset: () => {
			clearInterval(timerInterval);
			timer.set(0);
			timerRunning.set(false);
		},
	};
}

export const timer = createTimer();