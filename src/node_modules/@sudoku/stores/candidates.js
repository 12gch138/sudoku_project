import { writable } from 'svelte/store';
import {manager} from '@sudoku/strategy/strategy'

function createCandidates() {
	const candidates = writable({});

	return {
		subscribe: candidates.subscribe,

		update(board) {
			candidates.update($candidates => {
				dict = manager.getDictFromMatrix(board);
				for (const key in dict) {
					$candidates[key] = dict[key];
				}
				return $candidates;
			})
		},

		clear() {
			candidates.clear();
		}
	}
}

export const candidates = createCandidates();